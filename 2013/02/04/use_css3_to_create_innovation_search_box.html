<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
  <title>刘旸 Zation</title>
  <meta name="author" content="刘旸">
  <meta name="description"
  content="经历过各种技术和职位，最终发现前端开发才是我的归宿，现为Kber前端程序员，专注于实践优秀的前端代码架构。同时也关注用户体验以及新兴设计元素。">

  <link href="/stylesheets/main.css?1423851139" media="screen" rel="stylesheet" type="text/css" />
  <link href="/images/favicon.png?1401972413" rel="icon" type="image/png" />
  <!--[if lt IE 9]>
    <script src="/javascripts/html5shiv-printshiv.js?1401972413" type="text/javascript"></script>
  <![endif]-->
</head>

<body class="detail">
  <div class="main-container">
    <header class="nav-container">
      <div class="search-container">
  <div class="search-cancel-icon">✖</div>
  <button class="search-cancel">Cancel</button>
  <input placeholder="Search for article title or tags" class="search" type="text">
  <div class="search-qualifier"></div>
  <ul class="search-result">
  </ul>
</div>
<ul class="social-links">
  <li class="google-plus">
    <a target="_blank" href="https://plus.google.com/100624981016590778324?rel=author">
      Google
    </a>
  </li>
  <li class="weibo">
    <a target="_blank" href="http://weibo.com/zation1">
      Weibo
    </a>
  </li>
  <li class="rss">
    <a target="_blank" href="/feed.xml">
      RSS
    </a>
  </li>
  <li class="facebook">
    <a target="_blank" href="http://www.facebook.com/yang.liu.37669">
      Facebook
    </a>
  </li>
  <li class="github">
    <a target="_blank" href="https://github.com/zation">
      Github
    </a>
  </li>
</ul>
      <a href="/" class="logo">刘旸 Zation</a>
<ul class="nav">
  <li><a class="blog-link" href="/">Blog</a></li>
  <li><a class="about-link" href="/about.html">About</a></li>
  <li><a class="resume-link" href="/resume.html">Resume</a></li>
</ul>
    </header>

    <section class="content">
        <article class="article">
    <header class="article-title">
      <h1>
        使用CSS3制作一个有趣的搜索框
      </h1>
      
    </header>
    <ul class="extro-info">
      <li class="date">
        2013. 02. 04
      </li>
      
        <li class="tag">
          <a href="/tags/css3.html">css3</a>
        </li>
      
        <li class="tag">
          <a href="/tags/animation.html">animation</a>
        </li>
      
      <li class="comment">
        <a class="ds-thread-count"
          data-thread-key="use_css3_to_create_innovation_search_box"
          href="#comment"></a>
      </li>
    </ul>
    
    <div class="article-content">
      <p><img alt="CSS3" src="/images/CSS3.png?1401972413" /></p>

<p>动画效果在交互设计中占据着一个非常重要的位置，因为当我们在设计一个产品的时候，我们不仅仅是在设计它的外观，更是在设计它的行为。举例来说，一个好的演员可以利用他的动作、肢体语言使观众感受到角色的内心与特点，甚至将观众带入到相同的内心中，感同身受。同理，一系列好的动画设计，可以让使用者更容易了解产品的用法，感受到产品的特点，从而提升用户体验，甚至是让用户发出“Awesome! I love it！”的感叹。（关于动画到底是如何提升用户体验的，请看Alfredo Aponte的PPT：<a href="http://www.slideshare.net/findfado/ux-enhancing-experiences">UX: Enhancing Experiences with Animation</a>。）</p>

<p>如今CSS3的日趋成熟，使我们制作网页中动画效果的方式更加的方便和多样，下面让我们来看看使用CSS3如何制作一个有趣的搜索框，所使用到的属性包括<strong>tansform</strong>、<strong>animation</strong>、<strong>keyframes</strong>。最终效果情况本站右上角。</p>

<h3>使用transform绘制搜索框的“尾巴”</h3>

<p>通常的搜索框图标都由一个圆圈加一个“尾巴”组成，例如下面的图片：</p>

<p><img alt="Search Box" src="/images/search_box.png?1401972413" /></p>

<p>一般我们都使用图片来完成这个效果，但是图片会给我们的动画效果造成很大的限制，所以这里我们使用CSS3来实现它。首先是HTML结构：</p>

<pre><code>&lt;div class=&quot;search-container&quot;&gt;
    &lt;input placeholder=&quot;Search for article title or tags&quot; class=&quot;search&quot; type=&quot;text&quot;&gt;
    &lt;div class=&quot;search-qualifier&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
</code></pre>

<p>这里其实我希望只有一个<code>&lt;input&gt;</code>就可以实现，尾巴就在<code>input:after</code>中实现，这样可以避免无意义的HTML标签。但是<code>:before</code>和<code>:after</code>这种伪类是将内容插入到某个容器中，但是如果这个容器是自闭和标签（例如：<code>&lt;img&gt;</code>、<code>&lt;input&gt;</code>），则这些伪类是不起效果的。所以这里我只能加入一个无意义的<code>&lt;div&gt;</code>，仅仅用于显示“尾巴”了。</p>

<p>下面我们来看看如何将<code>&lt;input&gt;</code>变成一个圆圈（这里我就省略不同浏览器的前缀了）：</p>

<pre><code>.search {
    height: 18px;
    width: 18px;
    border-radius: 18px;
    background: white;
    border: 3px solid #999999;
    outline: none;
    padding: 3px;
    font-size: 0;
    box-shadow: inset 0 0 2px #999999, 0 0 2px #999999;
}
</code></pre>

<p>只要将<code>border-radius</code>设置为边长，或者大于边长，<code>&lt;input&gt;</code>就会变成一个圆圈了。</p>

<p>下面我们将<code>&lt;div class=&quot;search-qualifier&quot;&gt;&lt;/div&gt;</code>设置为一个短横条，然后再将他以左边中心为原点顺时针旋转45度，一个搜索框的“尾巴”就出现了。来看看具体的代码：</p>

<pre><code>.search-qualifier {
     display: block;
     height: 8px;
     width: 0;
     border: 3px solid #999;
     border-radius: 3px;
     content: &quot;&quot;;
     position: absolute;
     top: 24px;
     right: 2px;
     transform: rotate(-45deg);
     transform-origin: 50% 0;
}
</code></pre>

<p>这里要解释一下CSS3的新属性：<strong>transform</strong>。它是用于对元素做2D或者3D变换的，包括旋转、缩放、移动和倾斜等等。<code>transform: rotate(-45deg)</code>使<code>search-qualifier</code>顺时针旋转45度，然后使用<code>transform-origin: 50% 0</code>指定旋转的原点为左边的中心。具体可以参考<a href="http://www.w3schools.com/cssref/css3_pr_transform.asp">w3schools</a>上面的详细说明。</p>

<h3>使用animation和keyframe让“尾巴”动起来</h3>

<p>如果只是使用CSS3绘制这样的图形其实意义不大，与图片相比只是方便程序员调整大小，但是如果我们加入一些动画就不一样了，如果是好的动画效果，它会给用户心理上的惊喜，提高用户体验。下面我们就让“尾巴”可以左右摆动起来！</p>

<pre><code>@keyframes qualifier-shaking {
    0% {
      transform: rotate(-75deg);
    }
    100% {
      transform: rotate(-30deg);
    }
}

.search-qualifier {
    ...
    animation: qualifier-shaking 1s infinite alternate;
}
</code></pre>

<p>这里要解释一下CSS3的新属性：<strong>keyframes</strong>和<strong>animation</strong>。前者用于定义动画过程，后者用于调用动画。具体定义可以参考w3shcools：<a href="http://www.w3schools.com/cssref/css3_pr_keyframes.asp">keyframes</a>、<a href="http://www.w3schools.com/cssref/css3_pr_animation.asp">animation</a>。</p>

<p>我们首先利用<code>keyframes</code>定义了一个名为“qualifier-shaking”的动画：在动画开始的时候，“尾巴”的旋转角度为75度，然后顺时针旋转到30度，动画结束。动画定义完成后，就是调用动画了，我们使用<code>animation</code>来调用动画：“qualifier-shaking”表明了要调用的动画名称；“1s”是动画执行时间；“infinite”是动画执行次数，这里是执行无限次；“alternate”表明在动画多次执行过程中每次都是从头开始执行，还是以往复执行的方式。</p>

<p>仅仅是左右摇摆还是太单调了一点，我们希望这个“尾巴”可以动得更调皮一些。首先他会隐藏起来，然后每隔一段时间冒个头，摇摆一下再缩回去。</p>

<pre><code>@keyframes qualifier-shaking {
    0% {
        height: 0;
        border-width: 0;
    }
    40% {
        height: 0;
        border-width: 0;
    }
    43% {
        transform: rotate(-45deg);
        height: 8px;
        border-width: 3px;
    }
    46% {
        transform: rotate(-75deg);
    }
    49% {
        transform: rotate(-30deg);
    }
    52% {
        transform: rotate(-45deg);
        height: 8px;
        border-width: 3px;
    }
    57% {
        transform: rotate(-45deg);
        height: 8px;
        border-width: 3px;
    }
    60% {
        height: 0;
        border-width: 0;
    }
    100% {
        height: 0;
        border-width: 0;
    }
}

.search-qualifier {
    ...
    animation: qualifier-shaking 6s infinite;
}
</code></pre>

<p>这里我们设置更多的动画段，首尾两端都让“尾巴”隐藏，然后利用<code>height</code>和<code>border-width</code>的改变让“尾巴”冒头和缩回，其余都跟上一个例子相同。这里的animation也设置了更长的执行时间。</p>

<p>到此为止，一个有趣的CSS3搜索框就做好了。在现代的前端开发中，CSS已经可以完成动画的操作了，那么我们就尽量用CSS来完成，js最多就只用作改变class来触发动画。因为现在js负责的前端逻辑处理已经很多了，再给js加上动画处理的代码很容易导致项目js代码的爆炸。同时CSS3动画有来自浏览器自身的支持，效率和效果上都会 更好一些。</p>

    </div>
  </article>
  <div id="comment">
    <div class="ds-thread" data-thread-key="use_css3_to_create_innovation_search_box"></div>
  </div>

    </section>
  </div>

  <footer class="page-footer">
    <div class="nav-container">
      <div class="search-container">
  <div class="search-cancel-icon">✖</div>
  <button class="search-cancel">Cancel</button>
  <input placeholder="Search for article title or tags" class="search" type="text">
  <div class="search-qualifier"></div>
  <ul class="search-result">
  </ul>
</div>
<ul class="social-links">
  <li class="google-plus">
    <a target="_blank" href="https://plus.google.com/100624981016590778324?rel=author">
      Google
    </a>
  </li>
  <li class="weibo">
    <a target="_blank" href="http://weibo.com/zation1">
      Weibo
    </a>
  </li>
  <li class="rss">
    <a target="_blank" href="/feed.xml">
      RSS
    </a>
  </li>
  <li class="facebook">
    <a target="_blank" href="http://www.facebook.com/yang.liu.37669">
      Facebook
    </a>
  </li>
  <li class="github">
    <a target="_blank" href="https://github.com/zation">
      Github
    </a>
  </li>
</ul>
      <a href="/" class="logo">刘旸 Zation</a>
<ul class="nav">
  <li><a class="blog-link" href="/">Blog</a></li>
  <li><a class="about-link" href="/about.html">About</a></li>
  <li><a class="resume-link" href="/resume.html">Resume</a></li>
</ul>
    </div>
  </footer>
  <script src="/javascripts/main.js?1431086067" type="text/javascript"></script>
  <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-8993667-6', 'zation.me');
ga('require', 'displayfeatures');
ga('send', 'pageview');
  </script>
  <script type="text/javascript">
    var duoshuoQuery = {short_name:"zation"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = 'http://static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0] 
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>
</body>
</html>